# Adaptive-Binarizer

#### Описание полученных на данный момент выводов
- Опыты "одна картинка, графики для каждой delta, по горизонтали размер блока, по вертикали коэффициент схожести" - папки text14, text15, text16, text17, text18, text19, text23
   
   В данном эксперименте я основывалась на предположении, что на большом block_size(когда размер блока полностью покрывает лист) найдется delta, дающее неплохой результат 

   med; good_delta

   text14: ***75 ; 36-50*** 

   text15: ***61; видимо, ответ на малых block_size (~36?)***

   text16: ***81; 70***

   text17: ***59; 38***

   text18: ***55; 70 (40 тоже неплохо)***

   text19: ***70; 35; видимо, ответ на малых block_size***

   text23: ***19;  <90*** - эту картинку OCR распознает хорошо и без бинаризации. Медиана 19 - это говорит о том, что картинка довольно светлая
- Опыты на картинках с одинаковым фоном (очень печальным для OCR), разными шрифтами, на одинаковой delta. text13, папка delta10 - графики, где в названии картинки цифра обозначает размер шрифта, по горизонтали - block_size, по вертикали - коэффициент точности; названия вложенных папок обозначают диапазоны block_size 

   На малых block_size я пока не поняла закономерность. Но на block_size, сопоставимом с размером листа при переходе с 17,5 шрифта на 18 происходит скачок точности распознания. На больших block_size и шрифте 18 и более - результаты очень хороши. 

   17 шрифт из этого опыта участвовал так же и в другом опыте - text16. Этот опыт показал, что при большом block_size распознание этой картинки получается неплохим при delta = 70.

   Это наводит на мысль, что ***на block_size, покрывающем весь лист можно найти delta, при котором распознание будет успешным.***
   
   Но наблюдения в ходе опытов показали, что это не всегда / не совсем так. Об этом говорят наблюдения за опытами над картинками text19, text15. Эти картинки объединяет своеобразная "рамка" по краю листа. 

#### Решение?
adjust_1.py - программа пытается обрезать рамочку, если она есть (то есть если было обнаружено, что по краям картинка гораздо темнее, чем в среднем). Исследования показали, что, отдаленно, зависимость delta от медианы черно-белого изображения можно приблизить гиперболой. На основе имеющихся данных, вычисляем примерные коэффициенты гиперболы. block_size на весь лист

Пока работает не очень. Возможно, нужно вывести более сложную формулу для delta. А может, обрезать рамку - так себе идея, да и это не совсем можно по задаче

ann.py - попытка написать нейронную сеть радиальных базисных функций.
traindata - данные, на которых я планирую обучать сеть и еще три файла. Из них имеет значение файл 2.txt - это выжимка из данных картинок, которая и будет подаваться на вход сети. Эта выжимка собрана с помощью программы prepareTrainingData.py. Выжимка содержит медианы по всем каналам BGR изображений, медиану в черно-белом формате и "медиану", вычисленную по краю картинки. 
Я решила добавить в выжимку именно эту информацию исходя из полученных ранее выводов.



